(this.webpackJsonpfamtree=this.webpackJsonpfamtree||[]).push([[0],{109:function(t,e,n){},111:function(t,e,n){"use strict";n.r(e);var r=n(6),a=n(0),c=n.n(a),i=n(19),o=n.n(i),s=n(23),u=n(20),l=n(40),d=n(76),f=n(45),j=n(38),b=n(63),h=n(28),O=n(16),p=n.n(O),m=n(61),y=n(62),x=n.n(y),g=n(26),v="https://famtreeserver.herokuapp.com",k=function(){var t=Object(m.a)(p.a.mark((function t(e,n){var r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.post("".concat(v,"/login"),{username:e,password:n});case 2:r=t.sent,a=r.data.token,Object(g.c)(a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),w=function(){var t=Object(m.a)(p.a.mark((function t(){var e,n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(g.a)(),t.next=3,x.a.get("".concat(v,"/family/all"),{headers:{Authorization:"Bearer ".concat(e)}});case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=n(8),F=Object(a.forwardRef)((function(t,e){var n=t.stratifiedFamilies,c=t.selectedFamily,i=t.setSelectedFamily,o=Object(a.useState)(!1),s=Object(u.a)(o,2),O=s[0],p=s[1],m=Object(a.useState)(""),y=Object(u.a)(m,2),x=y[0],v=y[1],w=Object(a.useState)(""),F=Object(u.a)(w,2),E=F[0],A=F[1],I=Object(g.b)();return Object(r.jsxs)("div",{ref:e,children:[Object(r.jsxs)(l.a,{bg:"light",variant:"light",expand:"lg",children:[Object(r.jsx)(l.a.Brand,{children:"FamTree"}),Object(r.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(r.jsx)(l.a.Collapse,{id:"basic-navbar-nav",children:Object(r.jsxs)(d.a,{className:"justify-content-end",style:{width:"100%"},children:[Object(r.jsxs)(f.a,{title:c&&!Object(S.isEmpty)(n)?Object(S.find)(n,(function(t){return t.id===c})).data.name:"Family Root",id:"basic-nav-dropdown",onSelect:function(t){return i(t)},style:{marginRight:"5px"},children:[Object(r.jsx)(f.a.Item,{disabled:!0,children:Object(r.jsx)("div",{style:{fontWeight:"bold",fontSize:"1.2em"},children:"Family Root"})}),Object(r.jsx)(f.a.Divider,{}),n&&Object(S.map)(n,(function(t){return Object(r.jsx)(f.a.Item,{eventKey:t.id,active:t.id===c,children:t.data.name},t.id)}))]}),I?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(l.a.Text,{children:I.name}),Object(r.jsx)(j.a,{variant:"outline-danger",size:"sm",style:{marginLeft:"5px"},onClick:function(){return Object(g.c)("")},children:"Log Out"})]}):Object(r.jsx)(j.a,{variant:"outline-success",onClick:function(){return p(!0)},children:"Log In"})]})})]}),Object(r.jsx)(b.a,{show:O,centered:!0,children:Object(r.jsx)(b.a.Body,{children:Object(r.jsxs)(h.a,{children:[Object(r.jsxs)(h.a.Group,{controlId:"formBasicEmail",children:[Object(r.jsx)(h.a.Label,{children:"Username"}),Object(r.jsx)(h.a.Control,{type:"text",placeholder:"Enter email",value:x,onChange:function(t){return v(t.target.value)}})]}),Object(r.jsxs)(h.a.Group,{controlId:"formBasicPassword",children:[Object(r.jsx)(h.a.Label,{children:"Password"}),Object(r.jsx)(h.a.Control,{type:"password",placeholder:"Password",value:E,onChange:function(t){return A(t.target.value)}})]}),Object(r.jsx)(j.a,{variant:"primary",onClick:function(){return k(x,E).then((function(){return p(!1)}))},children:"Login"})]})})})]})})),E=n(118),A=n(119),I=n(75),C=function(t){var e=t.heightOffset,n=void 0===e?0:e,c=t.rawTreeData,i=t.stratifiedFamilies,o=t.selectedFamily,s=Object(a.useRef)(null);return Object(a.useEffect)((function(){Object(S.isEmpty)(c)||Object(S.isEmpty)(i)||Object(S.isEmpty)(o)||L(s,c,i,o)}),[c,i,o]),Object(r.jsx)("div",{style:{height:"calc(100% - ".concat(n,"px)")},children:Object(r.jsx)("svg",{ref:s,height:"100%",width:"100%"})})},R=150,B=200,L=function(t,e,n,r){var a=t.current,c=Object(E.a)(a);c.selectAll("*").remove();var i=Object(S.find)(n,(function(t){return t.id===r})),o=Object(A.a)(i).nodeSize([300,400]).separation((function(t,e){return e.data.spouse?1.5:1}))(i),s=c.append("g");c.call(Object(I.a)().scaleExtent([.2,1.25]).on("zoom",(function(t){var e=t.transform;return s.attr("transform",e)})));var u=a.getBoundingClientRect().width/2-75,l=s.append("g").attr("transform","translate(".concat(u,",0)")),d=o.descendants();l.append("g").selectAll("rect").data(d).join("rect").attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("width",R).attr("height",B).attr("class",(function(t){return t.data.gender})),l.append("g").selectAll("path").data(o.links()).join("path").style("stroke","blue").style("stroke-width","2px").style("fill","none").attr("d",(function(t){return"\n    M ".concat(t.source.x+75," ").concat(t.source.y+B,"\n    V ").concat(t.source.y+B+(t.target.y-t.source.y-B)/2,"\n    H ").concat(t.target.x+75,"\n    V ").concat(t.target.y,"\n    ")})),l.append("g").selectAll("text").data(d).join("text").attr("x",(function(t){return t.x+10})).attr("y",(function(t){return t.y+R+20})).text((function(t){return t.data.name})).style("font-weight","500"),l.append("g").selectAll("image").data(d).join("image").attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("width",R).attr("height",R).attr("href","https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Solid_black.svg/240px-Solid_black.svg.png");var f=d.filter((function(t){return t.data.spouse}));l.append("g").selectAll("rect").data(f).join("rect").attr("x",(function(t){return t.x+170})).attr("y",(function(t){return t.y})).attr("width",R).attr("height",B).attr("class",(function(t){return Object(S.find)(e,(function(e){return e.key===t.data.spouse})).gender})),l.append("g").selectAll("path").data(f).join("path").style("stroke","red").style("stroke-width",2).style("fill","none").attr("d",(function(t){return"M ".concat(t.x+R," ").concat(t.y+100," h 20")})),l.append("g").selectAll("text").data(f).join("text").attr("x",(function(t){return t.x+170+10})).attr("y",(function(t){return t.y+R+20})).text((function(t){return Object(S.find)(e,(function(e){return e.key===t.data.spouse})).name})).style("font-weight","500"),l.append("g").selectAll("image").data(f).join("image").attr("x",(function(t){return t.x+170})).attr("y",(function(t){return t.y})).attr("width",R).attr("height",R).attr("href","https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Solid_black.svg/240px-Solid_black.svg.png")},z=Object(a.forwardRef)((function(t,e){return Object(r.jsx)("div",{ref:e,children:"InfoPanel"})})),T=n(120),P=(n(109),function t(e,n){return e.father?t(Object(S.find)(n,(function(t){return t.key===e.father})),n):e.mother?t(Object(S.find)(n,(function(t){return t.key===e.mother})),n):e}),_=function(t){var e=Object(a.useState)(0),n=Object(u.a)(e,2),c=n[0],i=n[1],o=Object(a.useRef)(null),l=Object(a.useState)(0),d=Object(u.a)(l,2),f=d[0],j=d[1],b=Object(a.useRef)(null),h=Object(a.useState)({}),O=Object(u.a)(h,2),p=O[0],m=O[1],y=Object(a.useState)([]),x=Object(u.a)(y,2),v=x[0],k=x[1],E=Object(a.useState)(""),A=Object(u.a)(E,2),I=A[0],R=A[1];return Object(a.useEffect)((function(){Object(S.isEmpty)(p)&&w().then((function(t){m(t);var e,n=Object(g.b)(),r=[],a=Object(s.a)(n.family);try{var c=function(){var n=e.value,a=Object(S.filter)(t,(function(t){return t.family.includes(n)})),c=Object(T.a)().id((function(t){return t.key})).parentId((function(e){if(e.father&&Object(S.find)(t,(function(t){return t.key===e.father})).family.includes(n))return e.father;if(e.mother&&Object(S.find)(t,(function(t){return t.key===e.mother})).family.includes(n))return e.mother;return null}))(a);r.push(c)};for(a.s();!(e=a.n()).done;)c()}catch(o){a.e(o)}finally{a.f()}var i=P(n,t).key;R(i),k(r)}))}),[]),Object(a.useLayoutEffect)((function(){o.current&&i(o.current.offsetHeight),b.current&&j(b.current.offsetHeight)}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(F,{ref:o,stratifiedFamilies:v,selectedFamily:I,setSelectedFamily:R}),Object(r.jsx)(C,{rawTreeData:p,stratifiedFamilies:v,selectedFamily:I,heightOffset:c+f}),Object(r.jsx)(z,{ref:b})]})};n(110);o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(_,{})}),document.getElementById("root"))},26:function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u}));var r=n(8),a=t,c=a.localStorage,i=a.atob,o=function(t){return c.setItem("token",t)},s=function(){return c.getItem("token")},u=function(){var t=s();if(!Object(r.isEmpty)(t))return JSON.parse(i(t.split(".")[1]))}}).call(this,n(72))}},[[111,1,2]]]);
//# sourceMappingURL=main.55cd8348.chunk.js.map